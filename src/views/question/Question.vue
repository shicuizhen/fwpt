<template>
  <div class="question">
    <div class="top">
      <a href="">我要提问</a>
      <div class="sort_lbt center">
        <ul class="sort" :style="{transform:'translateX('+currentOffset*226+'px)'}">
          <li v-for = "(item) in quesSort" v-bind:key="item.name">
            <a href="">
              <span>分类</span>
              <p>{{ item.name }}</p>
              <span>讨论次数&nbsp;{{ item.quesNum }}</span>
              <span>问题数&nbsp;{{ item.quesNum }}</span>
            </a>
          </li>
        </ul>
      </div>
      <svg @click="right" t="1612847143655" class="icon left_icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="32021" width="200" height="200"><path d="M64 512c0 247.039 200.961 448 448 448s448-200.961 448-448S759.039 64 512 64 64 264.961 64 512zM355.135 501.149c0.033-0.127 0.193-0.256 0.256-0.384 1.536-3.616 3.649-7.072 6.592-10.048 0.033-0.031 0.065-0.031 0.096-0.064s0.031-0.064 0.064-0.096l158.912-159.359c12.48-12.511 32.735-12.576 45.248-0.064 12.511 12.48 12.544 32.735 0.064 45.248L430.079 513.055l137.408 135.904c12.576 12.447 12.673 32.672 0.256 45.248-6.239 6.336-14.496 9.504-22.751 9.504-8.128 0-16.258-3.103-22.497-9.248L362.24 535.968C352.768 526.592 350.399 512.767 355.135 501.149z" p-id="32022" fill="#bfbfbf"></path></svg>
      <svg @click="left" t="1612847179103" class="icon right_icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="32262" width="200" height="200"><path d="M512 64c-247.039484 0-448 200.960516-448 448S264.960516 960 512 960 960 759.039484 960 512 759.039484 64 512 64zM661.760516 535.967531l-160.25545 158.495686c-6.239161 6.14455-14.368821 9.247789-22.496761 9.247789-8.255235 0-16.512189-3.168606-22.751351-9.504099-12.416396-12.576374-12.320065-32.800753 0.25631-45.248112l137.407768-135.904314-136.287918-136.671523c-12.480043-12.512727-12.447359-32.768069 0.063647-45.248112 12.512727-12.512727 32.768069-12.447359 45.248112 0.063647l158.911974 159.359226c0.032684 0.032684 0.032684 0.063647 0.063647 0.096331s0.063647 0.032684 0.096331 0.063647c2.94326 2.975944 5.055665 6.431824 6.591802 10.047682 0.063647 0.127295 0.223626 0.25631 0.25631 0.383604C673.600645 512.767209 671.231931 526.592447 661.760516 535.967531z" p-id="32263" fill="#bfbfbf"></path></svg>
    </div>
    <div class="center">
      <div class="left">
        <p>平台最新问题</p>
        <div class="sort_xlk">
          <a href="" >选择分类</a>
          <i @click="icon_down()" class="el-icon-arrow-down" :class="{hidden : downState}" aria-hidden="true"></i>
          <i @click="icon_up()" class="el-icon-arrow-up" :class="{hidden : state}" aria-hidden="true"></i>
          <ul :class="{xlk : true, hidden : state}">
            <span class="el-icon-caret-top" aria-hidden="true"></span>
            <li>全部</li>
            <li>生活类问题</li>
            <li>学习类问题</li>
            <li>退出</li>
          </ul>
        </div>
        <input type="text" value="搜索" onfocus="if (value == '搜索'){value =''}" onblur="if (value ==''){value='搜索'}">
        <div class="no_solve butt">
          仅看未解决&nbsp;
          <el-button type="success" icon="el-icon-check" circle></el-button>
        </div>
        <ul class="ques_detail">
          <li v-for = "(item) in quesInformation" v-bind:key="item.id" :qid="item.id">
            <div class="det_show">
              <h3>{{item.title}}</h3>
              <div>
                <img src="../../assets/images/1.jpeg" alt="">
                <span>{{item.createBy}}</span>
                <span>{{ item.createTime }}前发布</span>
                <span>{{ item.sortName }}</span>
                <svg t="1612612804700" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3030" width="200" height="200"><path d="M277.333333 981.333333a42.666667 42.666667 0 0 1-42.666666-42.666666V405.333333a42.666667 42.666667 0 0 1 85.333333 0v533.333334a42.666667 42.666667 0 0 1-42.666667 42.666666z" fill="#d81e06" p-id="3031" data-spm-anchor-id="a313x.7781069.0.i3" class="selected"></path><path d="M734.933333 981.333333H170.666667a128 128 0 0 1-128-128V490.666667a128 128 0 0 1 128-128h94.933333l27.946667-16.426667A199.68 199.68 0 0 0 391.04 192a164.693333 164.693333 0 1 1 325.546667 47.36L692.053333 362.666667h232.96a85.333333 85.333333 0 0 1 82.133334 108.373333l-107.946667 385.706667a170.666667 170.666667 0 0 1-164.266667 124.586666zM170.666667 448a42.666667 42.666667 0 0 0-42.666667 42.666667v362.666666a42.666667 42.666667 0 0 0 42.666667 42.666667h564.266666a85.333333 85.333333 0 0 0 82.133334-62.293333L925.013333 448H692.053333a85.333333 85.333333 0 0 1-83.626666-101.973333l24.533333-123.093334a79.36 79.36 0 1 0-157.013333-22.613333 285.653333 285.653333 0 0 1-139.093334 219.52l-27.946666 16.426667a85.333333 85.333333 0 0 1-42.666667 11.733333z" fill="#d81e06" p-id="3032" data-spm-anchor-id="a313x.7781069.0.i4" class="selected"></path></svg>
              </div>
              <p>{{ item.content }}</p>
              <!--button对应的是class="reply"部分-->
              <button class="reply_btn" @click="reply_btn()">回答</button>
              <!--div展开对应的是ul class="reply_detail"-->
              <a @click="reply_detail(item.id)" class="open">
                <span>展开</span>
                <svg t="1612623150622" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4154" width="200" height="200"><path d="M927.804 352.193l-415.804 415.632-415.803-415.632 63.616-63.445 352.209 352.017 352.102-352.017z" p-id="4155"></path></svg>
              </a>
            </div>
            <!--以下部分一开始不存在，点击后才显示-->
            <form class="reply " v-if="showReply" action="">
              <span class="el-icon-caret-top" aria-hidden="true"></span>
              <textarea @scroll="areaOnScroll()" rows="5"
                        v-model="reply_data"
                        onfocus="if (value == '写下你关于这个问题的想法吧'){value =''}"
                        onblur="if (value ==''){value='写下你关于这个问题的想法吧'}"
              ></textarea>
              <input type="file" name="file" id="img" class="upload" @change="addImg" ref="inputer"
                     multiple accept="image/png, image/jpeg, image/gif, image/jpg"/>
              <label for="img">上传图片</label>
              <button>提交</button>
            </form>
            <ul class="upload-imgs">
              <li v-for='(value,key) in imgs' v-bind:key="key">
                <img :src="getObjectURL(value)">
                <a class="close" @click="delImg(key)">×</a>
              </li>
            </ul>
            <ul class="reply_detail" v-if="showReplyDetail" >
              <li v-for = "(item2) in quesReply" v-bind:key="item2.id">
                <div class="det_show">
                  <p>{{ item2.content }}</p>
                  <div>
                    <img class="reply_img" src="../../assets/images/1.jpeg" alt="">
                    <span>{{ item2.createBy }}</span>
                    <span>{{ item2.createTime }}前发布</span>
                    <!--button评论对应的是class="comm"-->
                    <button @click="comm_detail()" class="to_comm">评论</button>
                    <svg t="1612612804700" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3030" width="200" height="200"><path d="M277.333333 981.333333a42.666667 42.666667 0 0 1-42.666666-42.666666V405.333333a42.666667 42.666667 0 0 1 85.333333 0v533.333334a42.666667 42.666667 0 0 1-42.666667 42.666666z" fill="#d81e06" p-id="3031" data-spm-anchor-id="a313x.7781069.0.i3" class="selected"></path><path d="M734.933333 981.333333H170.666667a128 128 0 0 1-128-128V490.666667a128 128 0 0 1 128-128h94.933333l27.946667-16.426667A199.68 199.68 0 0 0 391.04 192a164.693333 164.693333 0 1 1 325.546667 47.36L692.053333 362.666667h232.96a85.333333 85.333333 0 0 1 82.133334 108.373333l-107.946667 385.706667a170.666667 170.666667 0 0 1-164.266667 124.586666zM170.666667 448a42.666667 42.666667 0 0 0-42.666667 42.666667v362.666666a42.666667 42.666667 0 0 0 42.666667 42.666667h564.266666a85.333333 85.333333 0 0 0 82.133334-62.293333L925.013333 448H692.053333a85.333333 85.333333 0 0 1-83.626666-101.973333l24.533333-123.093334a79.36 79.36 0 1 0-157.013333-22.613333 285.653333 285.653333 0 0 1-139.093334 219.52l-27.946666 16.426667a85.333333 85.333333 0 0 1-42.666667 11.733333z" fill="#d81e06" p-id="3032" data-spm-anchor-id="a313x.7781069.0.i4" class="selected"></path></svg>
                    <div v-if="showCommDetail" class="comm">
                      <span class="el-icon-caret-top" aria-hidden="true"></span>
                      <input type="text" value="写下你的评论" onfocus="if (value == '写下你的评论'){value =''}" onblur="if (value ==''){value='写下你的评论'}">
                      <button>提交</button>
                    </div>
                  </div>
                </div>
                <ul class="comment_detail det_show">
                  <li v-for = "(item) in quesComment" v-bind:key="item.id">
                    <img :src="item.photo" alt="">
                    <span>
                      <p class="nick">{{ item.createBy }}:</p>
                      <p>{{ item.content }}</p>
                    </span>
                    <div>
                      <span>{{ item.createTime }}前发布</span>
                      <a href="">回复</a>
                      <svg t="1612612804700" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3030" width="200" height="200"><path d="M277.333333 981.333333a42.666667 42.666667 0 0 1-42.666666-42.666666V405.333333a42.666667 42.666667 0 0 1 85.333333 0v533.333334a42.666667 42.666667 0 0 1-42.666667 42.666666z" fill="#d81e06" p-id="3031" data-spm-anchor-id="a313x.7781069.0.i3" class="selected"></path><path d="M734.933333 981.333333H170.666667a128 128 0 0 1-128-128V490.666667a128 128 0 0 1 128-128h94.933333l27.946667-16.426667A199.68 199.68 0 0 0 391.04 192a164.693333 164.693333 0 1 1 325.546667 47.36L692.053333 362.666667h232.96a85.333333 85.333333 0 0 1 82.133334 108.373333l-107.946667 385.706667a170.666667 170.666667 0 0 1-164.266667 124.586666zM170.666667 448a42.666667 42.666667 0 0 0-42.666667 42.666667v362.666666a42.666667 42.666667 0 0 0 42.666667 42.666667h564.266666a85.333333 85.333333 0 0 0 82.133334-62.293333L925.013333 448H692.053333a85.333333 85.333333 0 0 1-83.626666-101.973333l24.533333-123.093334a79.36 79.36 0 1 0-157.013333-22.613333 285.653333 285.653333 0 0 1-139.093334 219.52l-27.946666 16.426667a85.333333 85.333333 0 0 1-42.666667 11.733333z" fill="#d81e06" p-id="3032" data-spm-anchor-id="a313x.7781069.0.i4" class="selected"></path></svg>
                    </div>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div class="right">
        <div class="all_sort">
          <h3>所有分类</h3>
          <ul>
            <li>
              <a href="">
                <i class="el-icon-magic-stick"></i>
                <p>生活类问题</p>
                <i class="el-icon-right"></i>
              </a>
            </li>
            <li>
              <a href="">
                <i class="el-icon-office-building"></i>
                <p>生活类问题</p>
                <i class="el-icon-right"></i>
              </a>
            </li>
            <li>
              <a href="">
                <i class="el-icon-present"></i>
                <p>生活类问题</p>
                <i class="el-icon-right"></i>
              </a>
            </li>
            <li>
              <a href="">
                <i class="el-icon-camera"></i>
                <p>生活类问题</p>
                <i class="el-icon-right"></i>
              </a>
            </li>
          </ul>
        </div>
        <div class="hot_ques">
          <h3>热门问题</h3>
          <ul>
            <li>
              <a href="">
                <div>
                  <svg t="1612608284273" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11976" width="200" height="200"><path d="M859.9104 609.92512l0 45.6c-0.67968 2.21952-1.5104 4.4352-1.9648 6.70464-4.66048 24.09984-7.28448 48.82944-14.31552 72.22016-20.84992 69.02016-59.92064 126.53952-114.6944 173.50016-42.24512 36.2496-89.7856 62.36544-144.1344 75.22048-17.87008 4.23552-36.19456 6.73024-54.32064 10.0352l-45.5744 0c-2.21952-0.6848-4.49024-1.72032-6.75456-1.87008-48.12544-2.9952-93.72544-15.52512-136.50048-37.38496-80.86528-41.18528-139.19488-102.5152-165.83552-190.74048-5.67424-18.8544-8.03968-38.62016-11.9744-57.97504l0-43.50976c1.7152-10.69056 3.2-21.47456 5.21984-32.16 8.61952-46.68544 29.36576-88.0256 56.83968-126.19008 25.91488-35.92064 53.44-70.70464 78.016-107.53536 26.56896-39.95008 39.424-84.2944 31.88992-132.9152-1.4848-9.60512-2.87488-19.20896-4.33536-28.76416 0.98048-0.25088 1.9648-0.45056 2.9504-0.73088 59.31008 62.16064 68.96512 138.46528 60.49408 220.92032 2.17088-2.31936 3.98592-3.93472 5.37088-5.79968 50.33984-68.08448 71.96416-143.29984 55.55456-227.54688-10.42944-53.58976-32.99456-101.76512-70.32448-141.81504C369.3056 61.84576 349.69472 47.65568 331.61984 32l18.65472 0c1.536 0.62976 2.976 1.7152 4.53504 1.86496 32.82048 2.81984 63.65056 12.95488 93.02016 27.2 67.17056 32.51584 121.62048 80.58496 167.17056 139.22048 66.9504 86.27968 110.48448 181.99424 119.10528 292.19968 3.30496 42.06976-0.9856 82.95552-12.19968 123.2896-4.23552 15.27552-10.21056 30.04544-15.68 45.94944 21.72544-9.25056 38.24-23.38944 50.9952-41.7152 38.04032-54.77504 48.67456-115.85536 40.05504-183.38048 2.80064 3.24992 4.23552 4.53504 5.21472 6.14528 22.91456 36.19968 40.05504 74.81472 49.0048 116.78464C855.05024 576.17024 857.11488 593.1648 859.9104 609.92512M501.56544 529.61536c-0.85504 0.60544-1.79072 1.2352-2.67008 1.84064-1.18528 16.64-2.06976 33.30048-3.68 49.93536-2.37056 25.38496-8.44544 49.85984-20.32 72.62464-14.52032 27.87968-38.7904 45.21984-65.69088 59.01056-29.00992 14.9696-47.28448 36.34944-49.65504 70.10048-2.46912 34.70976 7.96544 63.86944 35.94496 85.20064 26.21568 19.96032 56.84096 26.4704 89.3056 25.38496 51.82976-1.6896 90.4448-26.32064 105.92512-78.1952 11.11552-37.23008 9.30048-74.71488 1.86496-112.19456-10.16064-51.37536-28.76544-99.26528-60.60032-141.2352C523.04512 550.36032 511.7504 540.40448 501.56544 529.61536" p-id="11977" fill="#d81e06"></path></svg>
                  <span>12</span>
                </div>
                <p>生活类问题生活类问题生活类问题生活类问题生活类问题生活类问题?</p>
              </a>
            </li>
            <li>
              <a href="">
                <div>
                  <svg t="1612608284273" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11976" width="200" height="200"><path d="M859.9104 609.92512l0 45.6c-0.67968 2.21952-1.5104 4.4352-1.9648 6.70464-4.66048 24.09984-7.28448 48.82944-14.31552 72.22016-20.84992 69.02016-59.92064 126.53952-114.6944 173.50016-42.24512 36.2496-89.7856 62.36544-144.1344 75.22048-17.87008 4.23552-36.19456 6.73024-54.32064 10.0352l-45.5744 0c-2.21952-0.6848-4.49024-1.72032-6.75456-1.87008-48.12544-2.9952-93.72544-15.52512-136.50048-37.38496-80.86528-41.18528-139.19488-102.5152-165.83552-190.74048-5.67424-18.8544-8.03968-38.62016-11.9744-57.97504l0-43.50976c1.7152-10.69056 3.2-21.47456 5.21984-32.16 8.61952-46.68544 29.36576-88.0256 56.83968-126.19008 25.91488-35.92064 53.44-70.70464 78.016-107.53536 26.56896-39.95008 39.424-84.2944 31.88992-132.9152-1.4848-9.60512-2.87488-19.20896-4.33536-28.76416 0.98048-0.25088 1.9648-0.45056 2.9504-0.73088 59.31008 62.16064 68.96512 138.46528 60.49408 220.92032 2.17088-2.31936 3.98592-3.93472 5.37088-5.79968 50.33984-68.08448 71.96416-143.29984 55.55456-227.54688-10.42944-53.58976-32.99456-101.76512-70.32448-141.81504C369.3056 61.84576 349.69472 47.65568 331.61984 32l18.65472 0c1.536 0.62976 2.976 1.7152 4.53504 1.86496 32.82048 2.81984 63.65056 12.95488 93.02016 27.2 67.17056 32.51584 121.62048 80.58496 167.17056 139.22048 66.9504 86.27968 110.48448 181.99424 119.10528 292.19968 3.30496 42.06976-0.9856 82.95552-12.19968 123.2896-4.23552 15.27552-10.21056 30.04544-15.68 45.94944 21.72544-9.25056 38.24-23.38944 50.9952-41.7152 38.04032-54.77504 48.67456-115.85536 40.05504-183.38048 2.80064 3.24992 4.23552 4.53504 5.21472 6.14528 22.91456 36.19968 40.05504 74.81472 49.0048 116.78464C855.05024 576.17024 857.11488 593.1648 859.9104 609.92512M501.56544 529.61536c-0.85504 0.60544-1.79072 1.2352-2.67008 1.84064-1.18528 16.64-2.06976 33.30048-3.68 49.93536-2.37056 25.38496-8.44544 49.85984-20.32 72.62464-14.52032 27.87968-38.7904 45.21984-65.69088 59.01056-29.00992 14.9696-47.28448 36.34944-49.65504 70.10048-2.46912 34.70976 7.96544 63.86944 35.94496 85.20064 26.21568 19.96032 56.84096 26.4704 89.3056 25.38496 51.82976-1.6896 90.4448-26.32064 105.92512-78.1952 11.11552-37.23008 9.30048-74.71488 1.86496-112.19456-10.16064-51.37536-28.76544-99.26528-60.60032-141.2352C523.04512 550.36032 511.7504 540.40448 501.56544 529.61536" p-id="11977" fill="#d81e06"></path></svg>
                  <span>12</span>
                </div>
                <p>数学题不会怎么办？</p>
              </a>
            </li>
            <li>
              <a href="">
                <div>
                  <svg t="1612608284273" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11976" width="200" height="200"><path d="M859.9104 609.92512l0 45.6c-0.67968 2.21952-1.5104 4.4352-1.9648 6.70464-4.66048 24.09984-7.28448 48.82944-14.31552 72.22016-20.84992 69.02016-59.92064 126.53952-114.6944 173.50016-42.24512 36.2496-89.7856 62.36544-144.1344 75.22048-17.87008 4.23552-36.19456 6.73024-54.32064 10.0352l-45.5744 0c-2.21952-0.6848-4.49024-1.72032-6.75456-1.87008-48.12544-2.9952-93.72544-15.52512-136.50048-37.38496-80.86528-41.18528-139.19488-102.5152-165.83552-190.74048-5.67424-18.8544-8.03968-38.62016-11.9744-57.97504l0-43.50976c1.7152-10.69056 3.2-21.47456 5.21984-32.16 8.61952-46.68544 29.36576-88.0256 56.83968-126.19008 25.91488-35.92064 53.44-70.70464 78.016-107.53536 26.56896-39.95008 39.424-84.2944 31.88992-132.9152-1.4848-9.60512-2.87488-19.20896-4.33536-28.76416 0.98048-0.25088 1.9648-0.45056 2.9504-0.73088 59.31008 62.16064 68.96512 138.46528 60.49408 220.92032 2.17088-2.31936 3.98592-3.93472 5.37088-5.79968 50.33984-68.08448 71.96416-143.29984 55.55456-227.54688-10.42944-53.58976-32.99456-101.76512-70.32448-141.81504C369.3056 61.84576 349.69472 47.65568 331.61984 32l18.65472 0c1.536 0.62976 2.976 1.7152 4.53504 1.86496 32.82048 2.81984 63.65056 12.95488 93.02016 27.2 67.17056 32.51584 121.62048 80.58496 167.17056 139.22048 66.9504 86.27968 110.48448 181.99424 119.10528 292.19968 3.30496 42.06976-0.9856 82.95552-12.19968 123.2896-4.23552 15.27552-10.21056 30.04544-15.68 45.94944 21.72544-9.25056 38.24-23.38944 50.9952-41.7152 38.04032-54.77504 48.67456-115.85536 40.05504-183.38048 2.80064 3.24992 4.23552 4.53504 5.21472 6.14528 22.91456 36.19968 40.05504 74.81472 49.0048 116.78464C855.05024 576.17024 857.11488 593.1648 859.9104 609.92512M501.56544 529.61536c-0.85504 0.60544-1.79072 1.2352-2.67008 1.84064-1.18528 16.64-2.06976 33.30048-3.68 49.93536-2.37056 25.38496-8.44544 49.85984-20.32 72.62464-14.52032 27.87968-38.7904 45.21984-65.69088 59.01056-29.00992 14.9696-47.28448 36.34944-49.65504 70.10048-2.46912 34.70976 7.96544 63.86944 35.94496 85.20064 26.21568 19.96032 56.84096 26.4704 89.3056 25.38496 51.82976-1.6896 90.4448-26.32064 105.92512-78.1952 11.11552-37.23008 9.30048-74.71488 1.86496-112.19456-10.16064-51.37536-28.76544-99.26528-60.60032-141.2352C523.04512 550.36032 511.7504 540.40448 501.56544 529.61536" p-id="11977" fill="#d81e06"></path></svg>
                  <span>12</span>
                </div>
                <p>生活类问题生活类问题生活类问题</p>
              </a>
            </li>
            <li>
              <a href="">
                <div>
                  <svg t="1612608284273" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11976" width="200" height="200"><path d="M859.9104 609.92512l0 45.6c-0.67968 2.21952-1.5104 4.4352-1.9648 6.70464-4.66048 24.09984-7.28448 48.82944-14.31552 72.22016-20.84992 69.02016-59.92064 126.53952-114.6944 173.50016-42.24512 36.2496-89.7856 62.36544-144.1344 75.22048-17.87008 4.23552-36.19456 6.73024-54.32064 10.0352l-45.5744 0c-2.21952-0.6848-4.49024-1.72032-6.75456-1.87008-48.12544-2.9952-93.72544-15.52512-136.50048-37.38496-80.86528-41.18528-139.19488-102.5152-165.83552-190.74048-5.67424-18.8544-8.03968-38.62016-11.9744-57.97504l0-43.50976c1.7152-10.69056 3.2-21.47456 5.21984-32.16 8.61952-46.68544 29.36576-88.0256 56.83968-126.19008 25.91488-35.92064 53.44-70.70464 78.016-107.53536 26.56896-39.95008 39.424-84.2944 31.88992-132.9152-1.4848-9.60512-2.87488-19.20896-4.33536-28.76416 0.98048-0.25088 1.9648-0.45056 2.9504-0.73088 59.31008 62.16064 68.96512 138.46528 60.49408 220.92032 2.17088-2.31936 3.98592-3.93472 5.37088-5.79968 50.33984-68.08448 71.96416-143.29984 55.55456-227.54688-10.42944-53.58976-32.99456-101.76512-70.32448-141.81504C369.3056 61.84576 349.69472 47.65568 331.61984 32l18.65472 0c1.536 0.62976 2.976 1.7152 4.53504 1.86496 32.82048 2.81984 63.65056 12.95488 93.02016 27.2 67.17056 32.51584 121.62048 80.58496 167.17056 139.22048 66.9504 86.27968 110.48448 181.99424 119.10528 292.19968 3.30496 42.06976-0.9856 82.95552-12.19968 123.2896-4.23552 15.27552-10.21056 30.04544-15.68 45.94944 21.72544-9.25056 38.24-23.38944 50.9952-41.7152 38.04032-54.77504 48.67456-115.85536 40.05504-183.38048 2.80064 3.24992 4.23552 4.53504 5.21472 6.14528 22.91456 36.19968 40.05504 74.81472 49.0048 116.78464C855.05024 576.17024 857.11488 593.1648 859.9104 609.92512M501.56544 529.61536c-0.85504 0.60544-1.79072 1.2352-2.67008 1.84064-1.18528 16.64-2.06976 33.30048-3.68 49.93536-2.37056 25.38496-8.44544 49.85984-20.32 72.62464-14.52032 27.87968-38.7904 45.21984-65.69088 59.01056-29.00992 14.9696-47.28448 36.34944-49.65504 70.10048-2.46912 34.70976 7.96544 63.86944 35.94496 85.20064 26.21568 19.96032 56.84096 26.4704 89.3056 25.38496 51.82976-1.6896 90.4448-26.32064 105.92512-78.1952 11.11552-37.23008 9.30048-74.71488 1.86496-112.19456-10.16064-51.37536-28.76544-99.26528-60.60032-141.2352C523.04512 550.36032 511.7504 540.40448 501.56544 529.61536" p-id="11977" fill="#d81e06"></path></svg>
                  <span>12</span>
                </div>
                <p>生活类问题生活类问题生活类问题</p>
              </a>
            </li>
            <li>
              <a href="">
                <div>
                  <svg t="1612608284273" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11976" width="200" height="200"><path d="M859.9104 609.92512l0 45.6c-0.67968 2.21952-1.5104 4.4352-1.9648 6.70464-4.66048 24.09984-7.28448 48.82944-14.31552 72.22016-20.84992 69.02016-59.92064 126.53952-114.6944 173.50016-42.24512 36.2496-89.7856 62.36544-144.1344 75.22048-17.87008 4.23552-36.19456 6.73024-54.32064 10.0352l-45.5744 0c-2.21952-0.6848-4.49024-1.72032-6.75456-1.87008-48.12544-2.9952-93.72544-15.52512-136.50048-37.38496-80.86528-41.18528-139.19488-102.5152-165.83552-190.74048-5.67424-18.8544-8.03968-38.62016-11.9744-57.97504l0-43.50976c1.7152-10.69056 3.2-21.47456 5.21984-32.16 8.61952-46.68544 29.36576-88.0256 56.83968-126.19008 25.91488-35.92064 53.44-70.70464 78.016-107.53536 26.56896-39.95008 39.424-84.2944 31.88992-132.9152-1.4848-9.60512-2.87488-19.20896-4.33536-28.76416 0.98048-0.25088 1.9648-0.45056 2.9504-0.73088 59.31008 62.16064 68.96512 138.46528 60.49408 220.92032 2.17088-2.31936 3.98592-3.93472 5.37088-5.79968 50.33984-68.08448 71.96416-143.29984 55.55456-227.54688-10.42944-53.58976-32.99456-101.76512-70.32448-141.81504C369.3056 61.84576 349.69472 47.65568 331.61984 32l18.65472 0c1.536 0.62976 2.976 1.7152 4.53504 1.86496 32.82048 2.81984 63.65056 12.95488 93.02016 27.2 67.17056 32.51584 121.62048 80.58496 167.17056 139.22048 66.9504 86.27968 110.48448 181.99424 119.10528 292.19968 3.30496 42.06976-0.9856 82.95552-12.19968 123.2896-4.23552 15.27552-10.21056 30.04544-15.68 45.94944 21.72544-9.25056 38.24-23.38944 50.9952-41.7152 38.04032-54.77504 48.67456-115.85536 40.05504-183.38048 2.80064 3.24992 4.23552 4.53504 5.21472 6.14528 22.91456 36.19968 40.05504 74.81472 49.0048 116.78464C855.05024 576.17024 857.11488 593.1648 859.9104 609.92512M501.56544 529.61536c-0.85504 0.60544-1.79072 1.2352-2.67008 1.84064-1.18528 16.64-2.06976 33.30048-3.68 49.93536-2.37056 25.38496-8.44544 49.85984-20.32 72.62464-14.52032 27.87968-38.7904 45.21984-65.69088 59.01056-29.00992 14.9696-47.28448 36.34944-49.65504 70.10048-2.46912 34.70976 7.96544 63.86944 35.94496 85.20064 26.21568 19.96032 56.84096 26.4704 89.3056 25.38496 51.82976-1.6896 90.4448-26.32064 105.92512-78.1952 11.11552-37.23008 9.30048-74.71488 1.86496-112.19456-10.16064-51.37536-28.76544-99.26528-60.60032-141.2352C523.04512 550.36032 511.7504 540.40448 501.56544 529.61536" p-id="11977" fill="#d81e06"></path></svg>
                  <span>12</span>
                </div>
                <p>生活类问题生活类问题生活类问题</p>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="bottom"></div>
  </div>
</template>
<script>
import '../../assets/css/question.css'
const axios = require('axios')
export default {
  name: 'Question',
  data: function () {
    return {
      downState: false,
      state: true,
      inp_val: '搜索',
      reply_data: '写下你关于这个问题的想法吧',
      showReply: false,
      showReplyDetail: false,
      showCommDetail: false,
      formData: new FormData(),
      imgs: {},
      imgLen: 0,
      quesSort: {},
      currentOffset: 0,
      quesInformation: {},
      quesReply: [],
      quesComment: {}
    }
  },
  methods: {
    icon_down () {
      this.downState = true
      this.state = false
    },
    icon_up () {
      this.downState = false
      this.state = true
    },
    areaOnScroll () {
      this.reply_data = this.reply_data.slice(0, 200)
      alert('请在4行内输入')
    },
    reply_btn () {
      if (this.showReply) {
        this.showReply = false
      } else {
        this.showReply = true
      }
    },
    reply_detail (qid) {
      console.log('qid:' + qid)
      this.loadQuesReply(qid)
      if (this.showReplyDetail) {
        this.showReplyDetail = false
      } else {
        this.showReplyDetail = true
      }
    },
    comm_detail () {
      if (this.showCommDetail) {
        this.showCommDetail = false
      } else {
        this.showCommDetail = true
      }
    },
    right () {
      console.log('right:currentOffset:' + this.currentOffset)
      if (this.currentOffset < 0) {
        this.currentOffset++
      }
    },
    left () {
      if (this.currentOffset === -(this.quesSort.length - 5)) {
        return
      }
      this.currentOffset = this.currentOffset - 1
      console.log('left:currentOffset:' + this.currentOffset)
    },
    // 图片上传及预览----------------
    addImg (event) {
      const inputDOM = this.$refs.inputer
      // 通过DOM取文件数据
      this.fil = inputDOM.files
      // 目前已有的图片的数量
      const oldLen = this.imgLen
      // 新的图片数量
      const len = this.fil.length + oldLen
      if (len > 4) {
        alert('最多可上传4张，您还可以上传' + (4 - oldLen) + '张')
        return false
      }
      for (let i = 0; i < this.fil.length; i++) {
        const size = Math.floor(this.fil[i].size / 1024)
        if (size > 5 * 1024 * 1024) {
          alert('请选择5M以内的图片！')
          return false
        }
        this.imgLen++
        this.$set(this.imgs, this.fil[i].name + '?' + new Date().getTime() + i, this.fil[i])
      }
    },
    getObjectURL (file) {
      var url = null
      if (window.createObjectURL !== undefined) { // basic
        url = window.URL.createObjectURL(file)
      } else if (window.URL !== undefined) { // mozilla(firefox)
        url = window.URL.createObjectURL(file)
      } else if (window.webkitURL !== undefined) { // webkit or chrome
        url = window.webkitURL.createObjectURL(file)
      }
      console.log('url:' + url)
      return url
    },
    delImg (key) {
      this.$delete(this.imgs, key)
      this.imgLen--
    },
    submit () {
      for (const key in this.imgs) {
        const name = key.split('?')[0]
        this.formData.append('multipartFiles', this.imgs[key], name)
      }
      this.$http.post('/opinion/feedback', this.formData, {
        headers: { 'Content-Type': 'multipart/form-data' }
      }).then(res => {
        this.alertShow = true
      })
    },
    // axios
    loadQuesSort () {
      var _this = this
      axios({
        method: 'get',
        url: 'http://localhost:8180/quesSort/datas'
      }).then(resp => {
        if (resp.data.code === 200) {
          _this.quesSort = resp.data.data
        }
      }).catch(error => error)
    },
    // 统一处理axios请求
    async getAxiosData (method, url) {
      return new Promise((resolve, reject) => {
        axios({
          method: method,
          url: url
        }).then((res) => {
          resolve(res)
        }).catch((err) => {
          reject(err)
        })
      })
    },
    async loadQuesSort1 () {
      this.quesSort = (await this.getHistoryData()).data.data
      console.log('---------------this.quesSort:' + this.quesSort)
    },
    loadQuesInformation () {
      var _this = this
      axios({
        method: 'get',
        url: 'http://localhost:8180/quesInformation/datas'
      }).then(resp => {
        if (resp.data.code === 200) {
          _this.quesInformation = resp.data.data
        }
      }).catch(error => error)
    },
    loadQuesReply (qid) {
      var _this = this
      axios({
        method: 'get',
        url: 'http://localhost:8180/quesReply/datas/%7Bqid%7D?qid='
      }).then(resp => {
        if (resp.data.code === 200) {
          console.log('--------------------------------------------')
          _this.quesReply[qid] = resp.data.data
          console.log('id:' + qid)
          console.log('_this.quesReply[qid]:' + _this.quesReply[qid].data)
        }
      }).catch(error => error)
    },
    loadQuesComment () {
      var _this = this
      axios({
        method: 'get',
        url: 'http://localhost:8180/quesComment/datas/%7Brid%7D?rid='
      }).then(resp => {
        if (resp.data.code === 200) {
          _this.quesComment = resp.data.data
        }
      }).catch(error => error)
    }
  },
  mounted: function () {
    this.loadQuesSort()
    this.loadQuesInformation()
    // this.loadQuesReply()
  },
  async created () {
  }
}
</script>
